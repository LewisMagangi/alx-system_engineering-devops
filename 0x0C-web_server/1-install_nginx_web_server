#!/usr/bin/env bash
#a Bash script that configures a new Ubuntu machine to respect above requirements (this script will be run on the server itself)

# Install nginx
sudo apt install -y nginx

# Create a temporary file to store the default nginx configuration
temp_config=$(mktemp)

# Write the nginx configuration to the temporary file
cat <<EOF > $temp_config
server {
    listen 80;
    server_name 52.91.137.2;
    location / {
        return 200 "Hello World!\n";
    }
}
EOF

# Apply the new configuration
sudo mv $temp_config /etc/nginx/sites-available/
sudo ln -s /etc/nginx/sites-available/$(basename $temp_config) /etc/nginx/sites-enabled/
sudo rm $temp_config

# Test the new configuration
sudo nginx -t

# Restart nginx
sudo service nginx restart